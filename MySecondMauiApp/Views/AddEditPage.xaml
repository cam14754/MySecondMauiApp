<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MySecondMauiApp.AddEditPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:model="clr-namespace:MySecondMauiApp.Model"
    xmlns:viewmodel="clr-namespace:MySecondMauiApp"
    x:DataType="viewmodel:AddEditViewModel"
    BackgroundColor="{AppThemeBinding Light={StaticResource LightBackground},
                                      Dark={StaticResource DarkBackground}}">
    <Grid RowDefinitions="*,Auto">
        <ScrollView Grid.Row="0">
            <VerticalStackLayout>
                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="Rock Name:" />
                        <Entry Placeholder="Enter the rock name" Text="{Binding Rock.Name}" />
                    </VerticalStackLayout>
                </Border>

                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="Select Rock Type:" />
                        <Picker
                            Title="Select a rock"
                            ItemsSource="{Binding RockTypes}"
                            SelectedItem="{Binding Rock.Type}" />
                    </VerticalStackLayout>
                </Border>

                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="Rock Description:" />
                        <Editor
                            AutoSize="TextChanges"
                            Placeholder="Enter a description of your rock (Max 300 words)"
                            Text="{Binding Rock.Description}" />
                    </VerticalStackLayout>
                </Border>

                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="Image:" />
                        <Border
                            HeightRequest="200"
                            Style="{StaticResource BaseBorder}"
                            WidthRequest="200">
                            <Image
                                Aspect="AspectFill"
                                HeightRequest="200"
                                Source="{Binding Rock.ImageString}"
                                WidthRequest="200" />
                        </Border>

                        <HorizontalStackLayout WidthRequest="250">
                            <Button
                                Margin="10,10,10,5"
                                Command="{Binding PickImageCommand}"
                                HorizontalOptions="Center"
                                Style="{StaticResource ButtonStyle}"
                                Text="Pick Image" />
                            <Button
                                Margin="10,10,10,5"
                                Command="{Binding TakeImageCommand}"
                                HorizontalOptions="Center"
                                Style="{StaticResource ButtonStyle}"
                                Text="Take Image" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Border>
                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>

                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="GeoLocation:" />
                        <Label IsVisible="{Binding Rock.HasLocation}" Style="{StaticResource MediumLabel}">
                            <Label.Text>
                                <MultiBinding StringFormat="Lat: {0:F5}, Lon: {1:F5}">
                                    <Binding Path="Rock.Location.Latitude" />
                                    <Binding Path="Rock.Location.Longitude" />
                                </MultiBinding>
                            </Label.Text>
                        </Label>
                        <Button
                            Command="{Binding GetRockLocationCommand}"
                            Style="{StaticResource ButtonStyle}"
                            Text="Get rock location" />
                    </VerticalStackLayout>
                </Border>

                <Border Style="{StaticResource FormCardStyle}">
                    <VerticalStackLayout>
                        <Label
                            FontAttributes="Bold"
                            Style="{StaticResource LargeLabel}"
                            Text="Date: " />
                    </VerticalStackLayout>
                </Border>

                <Button
                    Margin="10"
                    Command="{Binding SubmitCommand}"
                    HeightRequest="60"
                    Style="{StaticResource ButtonStyle}"
                    Text="Submit" />

            </VerticalStackLayout>

        </ScrollView>
        <Label
            Grid.Row="1"
            Style="{StaticResource SmallLabel}"
            Text="{Binding Rock.ID, StringFormat='ID: {0}'}" />

    </Grid>
</ContentPage>
